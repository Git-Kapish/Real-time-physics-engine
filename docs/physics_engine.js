var PhysicsEngine=(()=>{var _scriptName=globalThis.document?.currentScript?.src;return async function(moduleArg={}){var moduleRtn;var h=moduleArg,aa=!!globalThis.window,ca=!!globalThis.WorkerGlobalScope,da=globalThis.process?.versions?.node&&"renderer"!=globalThis.process?.type,ea=(a,b)=>{throw b;};"undefined"!=typeof __filename?_scriptName=__filename:ca&&(_scriptName=self.location.href);var fa="",ha,ia;
if(da){var fs=require("node:fs");fa=__dirname+"/";ia=a=>{a=ja(a)?new URL(a):a;return fs.readFileSync(a)};ha=async a=>{a=ja(a)?new URL(a):a;return fs.readFileSync(a,void 0)};process.argv.slice(2);ea=(a,b)=>{process.exitCode=a;throw b;}}else if(aa||ca){try{fa=(new URL(".",_scriptName)).href}catch{}ca&&(ia=a=>{var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)});ha=async a=>{if(ja(a))return new Promise((c,d)=>{var e=new XMLHttpRequest;
e.open("GET",a,!0);e.responseType="arraybuffer";e.onload=()=>{200==e.status||0==e.status&&e.response?c(e.response):d(e.status)};e.onerror=d;e.send(null)});var b=await fetch(a,{credentials:"same-origin"});if(b.ok)return b.arrayBuffer();throw Error(b.status+" : "+b.url);}}var ka=console.log.bind(console),m=console.error.bind(console),p,q=!1,la,ja=a=>a.startsWith("file://"),ma,na,r,v,w,z,A,B,oa,D,pa,qa,ra=!1;
function sa(){var a=ta.buffer;r=new Int8Array(a);w=new Int16Array(a);v=new Uint8Array(a);z=new Uint16Array(a);A=new Int32Array(a);B=new Uint32Array(a);oa=new Float32Array(a);D=new Float64Array(a);pa=new BigInt64Array(a);qa=new BigUint64Array(a)}function ua(a){h.onAbort?.(a);a="Aborted("+a+")";m(a);q=!0;a=new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.");na?.(a);throw a;}var va;
async function wa(a){if(!p)try{var b=await ha(a);return new Uint8Array(b)}catch{}if(a==va&&p)a=new Uint8Array(p);else if(ia)a=ia(a);else throw"both async and sync fetching of the wasm failed";return a}async function xa(a,b){try{var c=await wa(a);return await WebAssembly.instantiate(c,b)}catch(d){m(`failed to asynchronously prepare wasm: ${d}`),ua(d)}}
async function ya(a){var b=va;if(!p&&!ja(b)&&!da)try{var c=fetch(b,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(c,a)}catch(d){m(`wasm streaming compile failed: ${d}`),m("falling back to ArrayBuffer instantiation")}return xa(b,a)}class za{name="ExitStatus";constructor(a){this.message=`Program terminated with exit(${a})`;this.status=a}}
var Aa=a=>{for(;0<a.length;)a.shift()(h)},Ba=[],Ca=[],Da=()=>{var a=h.preRun.shift();Ca.push(a)},Ea=!0,Fa=globalThis.TextDecoder&&new TextDecoder,Ga=(a,b,c,d)=>{c=b+c;if(d)return c;for(;a[b]&&!(b>=c);)++b;return b},E=(a,b=0,c,d)=>{c=Ga(a,b,c,d);if(16<c-b&&a.buffer&&Fa)return Fa.decode(a.subarray(b,c));for(d="";b<c;){var e=a[b++];if(e&128){var f=a[b++]&63;if(192==(e&224))d+=String.fromCharCode((e&31)<<6|f);else{var g=a[b++]&63;e=224==(e&240)?(e&15)<<12|f<<6|g:(e&7)<<18|f<<12|g<<6|a[b++]&63;65536>e?
d+=String.fromCharCode(e):(e-=65536,d+=String.fromCharCode(55296|e>>10,56320|e&1023))}}else d+=String.fromCharCode(e)}return d};class Ha{constructor(a){this.Fa=a-24}}var Ia=0,Ja=0,G=a=>{for(var b="";;){var c=v[a++];if(!c)return b;b+=String.fromCharCode(c)}},H={},I={},Ka={},J=class extends Error{constructor(a){super(a);this.name="BindingError"}},La=a=>{throw new J(a);};
function Ma(a,b,c={}){var d=b.name;if(!a)throw new J(`type "${d}" must have a positive integer typeid pointer`);if(I.hasOwnProperty(a)){if(c.lb)return;throw new J(`Cannot register type '${d}' twice`);}I[a]=b;delete Ka[a];H.hasOwnProperty(a)&&(b=H[a],delete H[a],b.forEach(e=>e()))}function K(a,b,c={}){return Ma(a,b,c)}
var Na=(a,b,c)=>{switch(b){case 1:return c?d=>r[d]:d=>v[d];case 2:return c?d=>w[d>>1]:d=>z[d>>1];case 4:return c?d=>A[d>>2]:d=>B[d>>2];case 8:return c?d=>pa[d>>3]:d=>qa[d>>3];default:throw new TypeError(`invalid integer width (${b}): ${a}`);}},Pa=[],L=[0,1,,1,null,1,!0,1,!1,1],Qa=a=>{9<a&&0===--L[a+1]&&(L[a]=void 0,Pa.push(a))},N=a=>{if(!a)throw new J(`Cannot use deleted val. handle = ${a}`);return L[a]},O=a=>{switch(a){case void 0:return 2;case null:return 4;case !0:return 6;case !1:return 8;default:const b=
Pa.pop()||L.length;L[b]=a;L[b+1]=1;return b}};function Ra(a){return this.ya(B[a>>2])}var Sa={name:"emscripten::val",ya:a=>{var b=N(a);Qa(a);return b},Ba:(a,b)=>O(b),Da:Ra,Aa:null},Ta=(a,b)=>{switch(b){case 4:return function(c){return this.ya(oa[c>>2])};case 8:return function(c){return this.ya(D[c>>3])};default:throw new TypeError(`invalid float width (${b}): ${a}`);}},Ua=a=>{for(;a.length;){var b=a.pop();a.pop()(b)}};
function Va(a){for(var b=1;b<a.length;++b)if(null!==a[b]&&void 0===a[b].Aa)return!0;return!1}
var Wa=(a,b)=>{if(void 0===h[a].za){var c=h[a];h[a]=function(...d){if(!h[a].za.hasOwnProperty(d.length))throw new J(`Function '${b}' called with an invalid number of arguments (${d.length}) - expects one of (${h[a].za})!`);return h[a].za[d.length].apply(this,d)};h[a].za=[];h[a].za[c.Xa]=c}},Xa=(a,b,c)=>{if(h.hasOwnProperty(a)){if(void 0===c||void 0!==h[a].za&&void 0!==h[a].za[c])throw new J(`Cannot register public name '${a}' twice`);Wa(a,a);if(h[a].za.hasOwnProperty(c))throw new J(`Cannot register multiple overloads of a function with the same number of arguments (${c})!`);
h[a].za[c]=b}else h[a]=b,h[a].Xa=c},Ya=(a,b)=>{for(var c=[],d=0;d<a;d++)c.push(B[b+4*d>>2]);return c},Za=class extends Error{constructor(a){super(a);this.name="InternalError"}},$a=[],P=a=>{var b=$a[a];b||($a[a]=b=ab.get(a));return b},bb=(a,b)=>{a=G(a);var c=P(b);if("function"!=typeof c)throw new J(`unknown function pointer with signature ${a}: ${b}`);return c};class cb extends Error{}
var eb=a=>{a=db(a);var b=G(a);Q(a);return b},fb=(a,b)=>{function c(f){e[f]||I[f]||(Ka[f]?Ka[f].forEach(c):(d.push(f),e[f]=!0))}var d=[],e={};b.forEach(c);throw new cb(`${a}: `+d.map(eb).join([", "]));},gb=(a,b)=>{function c(k){k=b(k);if(k.length!==d.length)throw new Za("Mismatched type converter count");for(var l=0;l<d.length;++l)K(d[l],k[l])}var d=[];d.forEach(k=>Ka[k]=a);var e=Array(a.length),f=[],g=0;for(let [k,l]of a.entries())I.hasOwnProperty(l)?e[k]=I[l]:(f.push(l),H.hasOwnProperty(l)||(H[l]=
[]),H[l].push(()=>{e[k]=I[l];++g;g===f.length&&c(e)}));0===f.length&&c(e)},hb=a=>{a=a.trim();const b=a.indexOf("(");return-1===b?a:a.slice(0,b)},ib=(a,b,c)=>{var d=v;if(!(0<c))return 0;var e=b;c=b+c-1;for(var f=0;f<a.length;++f){var g=a.codePointAt(f);if(127>=g){if(b>=c)break;d[b++]=g}else if(2047>=g){if(b+1>=c)break;d[b++]=192|g>>6;d[b++]=128|g&63}else if(65535>=g){if(b+2>=c)break;d[b++]=224|g>>12;d[b++]=128|g>>6&63;d[b++]=128|g&63}else{if(b+3>=c)break;d[b++]=240|g>>18;d[b++]=128|g>>12&63;d[b++]=
128|g>>6&63;d[b++]=128|g&63;f++}}d[b]=0;return b-e},jb=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,kb=(a,b,c)=>{a>>=1;b=Ga(z,a,b/2,c);if(16<b-a&&jb)return jb.decode(z.subarray(a,b));for(c="";a<b;++a)c+=String.fromCharCode(z[a]);return c},lb=(a,b,c)=>{c??=2147483647;if(2>c)return 0;c-=2;var d=b;c=c<2*a.length?c/2:a.length;for(var e=0;e<c;++e)w[b>>1]=a.charCodeAt(e),b+=2;w[b>>1]=0;return b-d},mb=a=>2*a.length,nb=(a,b,c)=>{var d="";a>>=2;for(var e=0;!(e>=b/4);e++){var f=B[a+e];if(!f&&!c)break;
d+=String.fromCodePoint(f)}return d},ob=(a,b,c)=>{c??=2147483647;if(4>c)return 0;var d=b;c=d+c-4;for(var e=0;e<a.length;++e){var f=a.codePointAt(e);65535<f&&e++;A[b>>2]=f;b+=4;if(b+4>c)break}A[b>>2]=0;return b-d},pb=a=>{for(var b=0,c=0;c<a.length;++c)65535<a.codePointAt(c)&&c++,b+=4;return b},qb=[],rb=a=>{var b=qb.length;qb.push(a);return b},sb=(a,b)=>{for(var c=Array(a),d=0;d<a;++d){var e=d,f=B[b+4*d>>2],g=I[f];if(void 0===g)throw a=`${`parameter ${d}`} has unknown type ${eb(f)}`,new J(a);c[e]=g}return c},
tb=(a,b,c)=>{var d=[];a=a(d,c);d.length&&(B[b>>2]=O(d));return a},ub={},vb=a=>{var b=ub[a];return void 0===b?G(a):b},wb=[0,globalThis.document??0,globalThis.window??0],R=a=>{a=2<a?a?E(v,a):"":a;return wb[a]||globalThis.document?.querySelector(a)},xb=a=>{a instanceof za||"unwind"==a||ea(1,a)},yb=a=>{la=a;Ea||(h.onExit?.(a),q=!0);ea(a,new za(a))},zb=()=>{if(!Ea)try{var a=la;la=a;yb(a)}catch(b){xb(b)}},Kb=(a,b)=>{Ab=a;Bb=b;if(Cb)if(Db||=!0,0==a)S=function(){setTimeout(T,Math.max(0,Hb+b-performance.now())|
0)};else if(1==a)S=function(){Ib(T)};else{if(!Jb)if(globalThis.setImmediate)Jb=setImmediate;else{var c=[];addEventListener("message",d=>{if("setimmediate"===d.data||"setimmediate"===d.data.target)d.stopPropagation(),c.shift()()},!0);Jb=d=>{c.push(d);ca?(h.setImmediates??(h.setImmediates=[]),h.setImmediates.push(d),postMessage({target:"setimmediate"})):postMessage("setimmediate","*")}}S=function(){Jb(T)}}},Db=!1,S=null,Lb=0,Cb=null,Mb=0,Ab=0,Bb=0,Nb=0,Ob=[],Pb=[],Qb=[],Rb=0;
function Ib(a){if(globalThis.requestAnimationFrame)requestAnimationFrame(a);else{var b=Date.now();if(0===Rb)Rb=b+1E3/60;else for(;b+2>=Rb;)Rb+=1E3/60;setTimeout(a,Math.max(Rb-b,0))}}
var Sb={},Hb,T,Jb,Tb,Ub=(a,b,c,d,e)=>{function f(){return g<Lb?(zb(),!1):!0}Cb=a;Mb=d;var g=Lb;Db=!1;T=function(){if(!q)if(0<Ob.length){var k=Ob.shift();k.Bb(k.pb);if(Tb){var l=Tb,n=0==l%1?l-1:Math.floor(l);Tb=k.rb?n:(8*l+(n+.5))/9}h.setStatus&&(k=h.statusMessage||"Please wait...",l=Tb??0,n=Sb.wb??0,l?l<n?h.setStatus("{message} ({expected - remaining}/{expected})"):h.setStatus(k):h.setStatus(""));f()&&setTimeout(T,0)}else if(f())if(Nb=Nb+1|0,1==Ab&&1<Bb&&0!=Nb%Bb)S();else{0==Ab&&(Hb=performance.now());
a:if(!q){for(k of Pb)if(!1===k())break a;if(!q)try{a()}catch(u){xb(u)}finally{zb()}for(l of Qb)l()}f()&&S()}};e||(0<b?Kb(0,1E3/b):Kb(1,1),S());if(c)throw"unwind";};function Vb(a){var b=U.xa[a];b.target.removeEventListener(b.Ea,b.cb,b.Na);U.xa.splice(a,1)}function Wb(){if(navigator.userActivation?navigator.userActivation.isActive:U.Qa&&U.ib.Wa){var a=U.Ca;U.Ca=[];for(var b of a)b.Ra(...b.Ya)}}
function Xb(a){if(!a.target)return-4;if(a.Ga)a.cb=function(c){++U.Qa;U.ib=a;Wb();a.Pa(c);Wb();--U.Qa},a.target.addEventListener(a.Ea,a.cb,a.Na),U.xa.push(a);else for(var b=0;b<U.xa.length;++b)U.xa[b].target==a.target&&U.xa[b].Ea==a.Ea&&Vb(b--);return 0}
var U={qb:0,Cb:0,Eb:0,Ma:0,Ua:0,Sa:0,zb:0,ub:0,Ib:0,tb:0,Ab:0,Jb:0,Rb:0,Qb:0,Lb(){for(;U.xa.length;)Vb(U.xa.length-1);U.Ca=[]},Qa:0,Ca:[],sb(a,b,c){function d(f,g){if(f.length!=g.length)return!1;for(var k in f)if(f[k]!=g[k])return!1;return!0}for(var e of U.Ca)if(e.Ra==a&&d(e.Ya,c))return;U.Ca.push({Ra:a,fb:b,Ya:c});U.Ca.sort((f,g)=>f.fb<g.fb)},Nb(a){U.Ca=U.Ca.filter(b=>b.Ra!=a)},xa:[],Mb:(a,b)=>{for(var c=0;c<U.xa.length;++c)U.xa[c].target!=a||b&&b!=U.xa[c].Ea||Vb(c--)},Ob(a){let b=!1;for(let c=0;c<
U.xa.length;++c){const d=U.xa[c];d.target===a.target&&d.Ia===a.Ia&&d.Ga===a.Ga&&d.Oa===a.Oa&&(Vb(c--),b=!0)}return b?0:-5},Db(a){return a?a==window?"#window":a==screen?"#screen":a?.nodeName||"":""},fullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},Yb=(a,b,c)=>{D[a>>3]=b.timeStamp;var d=a>>2;A[d+2]=b.screenX;A[d+3]=b.screenY;A[d+4]=b.clientX;A[d+5]=b.clientY;r[a+24]=b.ctrlKey;r[a+25]=b.shiftKey;r[a+26]=b.altKey;r[a+27]=b.metaKey;w[2*d+14]=b.button;w[2*d+15]=
b.buttons;A[d+8]=b.movementX;A[d+9]=b.movementY;a=0>wb.indexOf(c)?c.getBoundingClientRect():{left:0,top:0};A[d+10]=b.clientX-(a.left|0);A[d+11]=b.clientY-(a.top|0)},Zb=(a,b,c,d,e,f)=>{U.Ma||(U.Ma=V(64));a=R(a);return Xb({target:a,Wa:"mousemove"!=f&&"mouseenter"!=f&&"mouseleave"!=f,Ea:f,Ia:e,Oa:b,Ga:d,Pa:g=>{Yb(U.Ma,g,a);P(d)(e,U.Ma,b)&&g.preventDefault()},Na:c})},$b=(a,b,c,d)=>{U.Sa||(U.Sa=V(36));a=R(a);return Xb({target:a,Ea:"resize",Ia:10,Oa:b,Ga:d,Pa:e=>{if(e.target==a){var f=document.body;if(f){var g=
U.Sa;A[g>>2]=0;A[g+4>>2]=f.clientWidth;A[g+8>>2]=f.clientHeight;A[g+12>>2]=innerWidth;A[g+16>>2]=innerHeight;A[g+20>>2]=outerWidth;A[g+24>>2]=outerHeight;A[g+28>>2]=pageXOffset|0;A[g+32>>2]=pageYOffset|0;P(d)(10,g,b)&&e.preventDefault()}}},Na:c})},ac=(a,b,c,d)=>{U.Ua||(U.Ua=V(96));return Xb({target:a,Wa:!0,Ea:"wheel",Ia:9,Oa:b,Ga:d,Pa:e=>{var f=U.Ua;Yb(f,e,a);D[f+64>>3]=e.deltaX;D[f+72>>3]=e.deltaY;D[f+80>>3]=e.deltaZ;A[f+88>>2]=e.deltaMode;P(d)(9,f,b)&&e.preventDefault()},Na:c})},W,bc=a=>{var b=
"EXT_color_buffer_float EXT_conservative_depth EXT_disjoint_timer_query_webgl2 EXT_texture_norm16 NV_shader_noperspective_interpolation WEBGL_clip_cull_distance EXT_clip_control EXT_color_buffer_half_float EXT_depth_clamp EXT_float_blend EXT_polygon_offset_clamp EXT_texture_compression_bptc EXT_texture_compression_rgtc EXT_texture_filter_anisotropic KHR_parallel_shader_compile OES_texture_float_linear WEBGL_blend_func_extended WEBGL_compressed_texture_astc WEBGL_compressed_texture_etc WEBGL_compressed_texture_etc1 WEBGL_compressed_texture_s3tc WEBGL_compressed_texture_s3tc_srgb WEBGL_debug_renderer_info WEBGL_debug_shaders WEBGL_lose_context WEBGL_multi_draw WEBGL_polygon_mode".split(" ");
return(a.getSupportedExtensions()||[]).filter(c=>b.includes(c))},cc=1,dc=[],X=[],Y=[],ec=[],fc=[],gc=a=>{for(var b=cc++,c=a.length;c<b;c++)a[c]=null;return b},hc=(a,b,c,d)=>{for(var e=0;e<a;e++){var f=W[c](),g=f&&gc(d);f?(f.name=g,d[g]=f):Z||=1282;A[b+4*e>>2]=g}},jc=(a,b)=>{a.Fa||(a.Fa=a.getContext,a.getContext=function(d,e){e=a.Fa(d,e);return"webgl"==d==e instanceof WebGLRenderingContext?e:null});var c=a.getContext("webgl2",b);return c?ic(c,b):0},ic=(a,b)=>{var c=gc(fc),d={handle:c,attributes:b,
version:b.nb,Va:a};a.canvas&&(a.canvas.ob=d);fc[c]=d;if("undefined"==typeof b.bb||b.bb)if((a=d)||(a=kc),!a.mb){a.mb=!0;b=a.Va;b.Hb=b.getExtension("WEBGL_multi_draw");b.yb=b.getExtension("EXT_polygon_offset_clamp");b.xb=b.getExtension("EXT_clip_control");b.Sb=b.getExtension("WEBGL_polygon_mode");b.vb=b.getExtension("WEBGL_draw_instanced_base_vertex_base_instance");b.Fb=b.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance");2<=a.version&&(b.ab=b.getExtension("EXT_disjoint_timer_query_webgl2"));
if(2>a.version||!b.ab)b.ab=b.getExtension("EXT_disjoint_timer_query");for(var e of bc(b))e.includes("lose_context")||e.includes("debug")||b.getExtension(e)}return c},Z,kc,lc=["default","low-power","high-performance"],mc=[null,[],[]],nc=a=>"]"==a.slice(-1)&&a.lastIndexOf("["),oc=a=>{var b=W.jb;if(b){var c=b.Ha[a];"number"==typeof c&&(b.Ha[a]=c=W.getUniformLocation(b,b.gb[a]+(0<c?`[${c}]`:"")));return c}Z||=1282};h.requestAnimationFrame=Ib;h.pauseMainLoop=function(){S=null;Lb++};
h.resumeMainLoop=function(){Lb++;var a=Ab,b=Bb,c=Cb;Cb=null;Ub(c,0,!1,Mb,!0);Kb(a,b);S()};h.preMainLoop&&Pb.push(h.preMainLoop);h.postMainLoop&&Qb.push(h.postMainLoop);h.noExitRuntime&&(Ea=h.noExitRuntime);h.print&&(ka=h.print);h.printErr&&(m=h.printErr);h.wasmBinary&&(p=h.wasmBinary);if(h.preInit)for("function"==typeof h.preInit&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.shift()();
var db,pc,V,Q,ta,ab,qc={e:(a,b,c,d)=>ua(`Assertion failed: ${a?E(v,a):""}, at: `+[b?b?E(v,b):"":"unknown filename",c,d?d?E(v,d):"":"unknown function"]),J:(a,b,c)=>{var d=new Ha(a);B[d.Fa+16>>2]=0;B[d.Fa+4>>2]=b;B[d.Fa+8>>2]=c;Ia=a;Ja++;throw Ia;},S:()=>ua(""),I:(a,b,c,d,e)=>{b=G(b);d=0n===d;let f=g=>g;if(d){const g=8*c;f=k=>BigInt.asUintN(g,k);e=f(e)}K(a,{name:b,ya:f,Ba:(g,k)=>{"number"==typeof k&&(k=BigInt(k));return k},Da:Na(b,c,!d),Aa:null})},ga:(a,b,c,d)=>{b=G(b);K(a,{name:b,ya:function(e){return!!e},
Ba:function(e,f){return f?c:d},Da:function(e){return this.ya(v[e])},Aa:null})},ea:a=>K(a,Sa),G:(a,b,c)=>{b=G(b);K(a,{name:b,ya:d=>d,Ba:(d,e)=>e,Da:Ta(b,c),Aa:null})},c:(a,b,c,d,e,f,g)=>{var k=Ya(b,c);a=G(a);a=hb(a);e=bb(d,e);Xa(a,function(){fb(`Cannot call ${a} due to unbound types`,k)},b-1);gb(k,l=>{var n=[l[0],null].concat(l.slice(1));l=a;var u=a;var F=e,t=n.length;if(2>t)throw new J("argTypes array size mismatch! Must at least get return value and 'this' types!");var M=null!==n[1]&&!1,ba=Va(n),
Eb=!n[0].eb,x=n[0],C=n[1];F=[u,La,F,f,Ua,x.ya.bind(x),C?.Ba.bind(C)];for(x=2;x<t;++x)C=n[x],F.push(C.Ba.bind(C));if(!ba)for(x=M?1:2;x<n.length;++x)null!==n[x].Aa&&F.push(n[x].Aa);ba=Va(n);x=n.length-2;var y=[];C=["fn"];M&&C.push("thisWired");for(t=0;t<x;++t)y.push(`arg${t}`),C.push(`arg${t}Wired`);y=y.join(",");C=C.join(",");y=`return function (${y}) {\n`;ba&&(y+="var destructors = [];\n");var Fb=ba?"destructors":"null",Oa="humanName throwBindingError invoker fn runDestructors fromRetWire toClassParamWire".split(" ");
M&&(y+=`var thisWired = toClassParamWire(${Fb}, this);\n`);for(t=0;t<x;++t){var Gb=`toArg${t}Wire`;y+=`var arg${t}Wired = ${Gb}(${Fb}, arg${t});\n`;Oa.push(Gb)}y+=(Eb||g?"var rv = ":"")+`invoker(${C});\n`;if(ba)y+="runDestructors(destructors);\n";else for(t=M?1:2;t<n.length;++t)M=1===t?"thisWired":"arg"+(t-2)+"Wired",null!==n[t].Aa&&(y+=`${M}_dtor(${M});\n`,Oa.push(`${M}_dtor`));Eb&&(y+="var ret = fromRetWire(rv);\nreturn ret;\n");n=(new Function(Oa,y+"}\n"))(...F);u=Object.defineProperty(n,"name",
{value:u});n=b-1;if(!h.hasOwnProperty(l))throw new Za("Replacing nonexistent public symbol");void 0!==h[l].za&&void 0!==n?h[l].za[n]=u:(h[l]=u,h[l].Xa=n);return[]})},g:(a,b,c,d,e)=>{b=G(b);let f=k=>k;if(0===d){var g=32-8*c;f=k=>k<<g>>>g;e=f(e)}K(a,{name:b,ya:f,Ba:(k,l)=>l,Da:Na(b,c,0!==d),Aa:null})},b:(a,b,c)=>{function d(f){return new e(r.buffer,B[f+4>>2],B[f>>2])}var e=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][b];
c=G(c);K(a,{name:c,ya:d,Da:d},{lb:!0})},fa:(a,b)=>{b=G(b);K(a,{name:b,ya(c){var d=(d=c+4)?E(v,d,B[c>>2],!0):"";Q(c);return d},Ba(c,d){d instanceof ArrayBuffer&&(d=new Uint8Array(d));var e,f="string"==typeof d;if(!(f||ArrayBuffer.isView(d)&&1==d.BYTES_PER_ELEMENT))throw new J("Cannot pass non-string to std::string");if(f)for(var g=e=0;g<d.length;++g){var k=d.charCodeAt(g);127>=k?e++:2047>=k?e+=2:55296<=k&&57343>=k?(e+=4,++g):e+=3}else e=d.length;g=V(4+e+1);k=g+4;B[g>>2]=e;f?ib(d,k,e+1):v.set(d,k);
null!==c&&c.push(Q,g);return g},Da:Ra,Aa(c){Q(c)}})},n:(a,b,c)=>{c=G(c);if(2===b){var d=kb;var e=lb;var f=mb}else d=nb,e=ob,f=pb;K(a,{name:c,ya:g=>{var k=d(g+4,B[g>>2]*b,!0);Q(g);return k},Ba:(g,k)=>{if("string"!=typeof k)throw new J(`Cannot pass non-string to C++ string type ${c}`);var l=f(k),n=V(4+l+b);B[n>>2]=l/b;e(k,n+4,l+b);null!==g&&g.push(Q,n);return n},Da:Ra,Aa(g){Q(g)}})},ha:(a,b)=>{b=G(b);K(a,{eb:!0,name:b,ya:()=>{},Ba:()=>{}})},q:(a,b,c)=>{var [d,...e]=sb(a,b);b=d.Ba.bind(d);var f=e.map(l=>
l.Da.bind(l));a--;var g={toValue:N};a=f.map((l,n)=>{var u=`argFromPtr${n}`;g[u]=l;return`${u}(args${n?"+"+8*n:""})`});switch(c){case 0:var k="toValue(handle)";break;case 2:k="new (toValue(handle))";break;case 3:k="";break;case 1:g.getStringOrSymbol=vb,k="toValue(handle)[getStringOrSymbol(methodName)]"}k+=`(${a})`;d.eb||(g.toReturnWire=b,g.emval_returnValue=tb,k=`return emval_returnValue(toReturnWire, destructorsRef, ${k})`);k=`return function (handle, methodName, destructorsRef, args) {\n${k}\n}`;
c=(new Function(Object.keys(g),k))(...Object.values(g));k=`methodCaller<(${e.map(l=>l.name)}) => ${d.name}>`;return rb(Object.defineProperty(c,"name",{value:k}))},k:Qa,ia:a=>{9<a&&(L[a+1]+=1)},p:(a,b,c,d,e)=>qb[a](b,c,d,e),ka:()=>O([]),L:a=>O(vb(a)),ja:()=>O({}),o:a=>{var b=N(a);Ua(b);Qa(a)},K:(a,b,c)=>{a=N(a);b=N(b);c=N(c);a[b]=c},ma:(a,b,c)=>{a=R(a);if(!a)return-4;A[b>>2]=a.width;A[c>>2]=a.height},M:(a,b,c)=>{a=R(a);if(!a)return-4;a=0>wb.indexOf(a)?a.getBoundingClientRect():{left:0,top:0};D[b>>
3]=a.width;D[c>>3]=a.height;return 0},O:()=>performance.now(),T:a=>{var b=v.length;a>>>=0;if(2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);d=Math.min(d,a+100663296);a:{d=(Math.min(2147483648,65536*Math.ceil(Math.max(a,d)/65536))-ta.buffer.byteLength+65535)/65536|0;try{ta.grow(d);sa();var e=1;break a}catch(f){}e=void 0}if(e)return!0}return!1},H:(a,b,c)=>{a=R(a);if(!a)return-4;a.width=b;a.height=c;return 0},na:(a,b,c)=>{a=P(a);Ub(a,b,c)},$:(a,b,c,d)=>Zb(a,b,c,d,5,"mousedown"),R:(a,b,
c,d)=>Zb(a,b,c,d,8,"mousemove"),W:(a,b,c,d)=>Zb(a,b,c,d,6,"mouseup"),P:(a,b,c,d)=>$b(a,b,c,d),Q:(a,b,c,d)=>(a=R(a))?"undefined"!=typeof a.onwheel?ac(a,b,c,d):-1:-4,pa:(a,b)=>{var c=b>>2;b={alpha:!!r[b+0],depth:!!r[b+1],stencil:!!r[b+2],antialias:!!r[b+3],premultipliedAlpha:!!r[b+4],preserveDrawingBuffer:!!r[b+5],powerPreference:lc[A[c+2]],failIfMajorPerformanceCaveat:!!r[b+12],nb:A[c+4],Gb:A[c+5],bb:r[b+24],kb:r[b+25],Kb:A[c+7],Pb:r[b+32]};a=R(a);return!a||b.kb?0:jc(a,b)},oa:a=>{kc=fc[a];h.ctx=W=
kc?.Va;return!a||W?0:-5},r:(a,b,c,d)=>{for(var e=0,f=0;f<c;f++){var g=B[b>>2],k=B[b+4>>2];b+=8;for(var l=0;l<k;l++){var n=a,u=v[g+l],F=mc[n];0===u||10===u?((1===n?ka:m)(E(F)),F.length=0):F.push(u)}e+=k}B[d>>2]=e;return 0},w:(a,b)=>{W.attachShader(X[a],Y[b])},E:(a,b)=>{35051==a?W.Za=b:35052==a&&(W.$a=b);W.bindBuffer(a,dc[b])},h:a=>{W.bindVertexArray(ec[a])},V:(a,b)=>W.blendFunc(a,b),D:(a,b,c,d)=>{c&&b?W.bufferData(a,v,d,c,b):W.bufferData(a,b,d)},N:a=>W.clear(a),ca:(a,b,c,d)=>W.clearColor(a,b,c,d),
z:a=>{W.compileShader(Y[a])},_:()=>{var a=gc(X),b=W.createProgram();b.name=a;b.La=b.Ja=b.Ka=0;b.Ta=1;X[a]=b;return a},B:a=>{var b=gc(Y);Y[b]=W.createShader(a);return b},a:(a,b)=>{for(var c=0;c<a;c++){var d=A[b+4*c>>2],e=dc[d];e&&(W.deleteBuffer(e),e.name=0,dc[d]=null,d==W.Za&&(W.Za=0),d==W.$a&&(W.$a=0))}},C:a=>{if(a){var b=X[a];b?(W.deleteProgram(b),b.name=0,X[a]=null):Z||=1281}},v:a=>{if(a){var b=Y[a];b?(W.deleteShader(b),Y[a]=null):Z||=1281}},d:(a,b)=>{for(var c=0;c<a;c++){var d=A[b+4*c>>2];W.deleteVertexArray(ec[d]);
ec[d]=null}},s:a=>W.disable(a),m:(a,b,c,d)=>{W.drawElements(a,b,c,d)},i:a=>W.enable(a),ba:a=>{W.enableVertexAttribArray(a)},F:(a,b)=>{hc(a,b,"createBuffer",dc)},da:(a,b)=>{hc(a,b,"createVertexArray",ec)},X:(a,b,c,d)=>{a=W.getProgramInfoLog(X[a]);null===a&&(a="(unknown error)");b=0<b&&d?ib(a,d,b):0;c&&(A[c>>2]=b)},Y:(a,b,c)=>{if(c)if(a>=cc)Z||=1281;else if(a=X[a],35716==b)a=W.getProgramInfoLog(a),null===a&&(a="(unknown error)"),A[c>>2]=a.length+1;else if(35719==b){if(!a.La){var d=W.getProgramParameter(a,
35718);for(b=0;b<d;++b)a.La=Math.max(a.La,W.getActiveUniform(a,b).name.length+1)}A[c>>2]=a.La}else if(35722==b){if(!a.Ja)for(d=W.getProgramParameter(a,35721),b=0;b<d;++b)a.Ja=Math.max(a.Ja,W.getActiveAttrib(a,b).name.length+1);A[c>>2]=a.Ja}else if(35381==b){if(!a.Ka)for(d=W.getProgramParameter(a,35382),b=0;b<d;++b)a.Ka=Math.max(a.Ka,W.getActiveUniformBlockName(a,b).length+1);A[c>>2]=a.Ka}else A[c>>2]=W.getProgramParameter(a,b);else Z||=1281},x:(a,b,c,d)=>{a=W.getShaderInfoLog(Y[a]);null===a&&(a="(unknown error)");
b=0<b&&d?ib(a,d,b):0;c&&(A[c>>2]=b)},y:(a,b,c)=>{c?35716==b?(a=W.getShaderInfoLog(Y[a]),null===a&&(a="(unknown error)"),A[c>>2]=a?a.length+1:0):35720==b?(a=W.getShaderSource(Y[a]),A[c>>2]=a?a.length+1:0):A[c>>2]=W.getShaderParameter(Y[a],b):Z||=1281},f:(a,b)=>{b=b?E(v,b):"";if(a=X[a]){var c=a,d=c.Ha,e=c.hb,f;if(!d){c.Ha=d={};c.gb={};var g=W.getProgramParameter(c,35718);for(f=0;f<g;++f){var k=W.getActiveUniform(c,f);var l=k.name;k=k.size;var n=nc(l);n=0<n?l.slice(0,n):l;var u=c.Ta;c.Ta+=k;e[n]=[k,
u];for(l=0;l<k;++l)d[u]=l,c.gb[u++]=n}}c=a.Ha;d=0;e=b;f=nc(b);0<f&&(d=parseInt(b.slice(f+1))>>>0,e=b.slice(0,f));if((e=a.hb[e])&&d<e[0]&&(d+=e[1],c[d]=c[d]||W.getUniformLocation(a,b)))return d}else Z||=1281;return-1},U:a=>W.lineWidth(a),Z:a=>{a=X[a];W.linkProgram(a);a.Ha=0;a.hb={}},A:(a,b,c,d)=>{for(var e="",f=0;f<b;++f){var g=(g=B[c+4*f>>2])?E(v,g,d?B[d+4*f>>2]:void 0):"";e+=g}W.shaderSource(Y[a],e)},j:(a,b)=>{W.uniform1f(oc(a),b)},t:(a,b,c,d)=>{W.uniform3f(oc(a),b,c,d)},u:(a,b,c,d)=>{b&&W.uniformMatrix4fv(oc(a),
!!c,oa,d>>2,16*b)},l:a=>{a=X[a];W.useProgram(a);W.jb=a},aa:(a,b,c,d,e,f)=>{W.vertexAttribPointer(a,b,c,!!d,e,f)},la:(a,b,c,d)=>W.viewport(a,b,c,d)},rc;rc=await (async function(){function a(c){c=rc=c.exports;db=c.sa;pc=h._main=c.ua;V=c.va;Q=c.wa;ta=c.qa;ab=c.ta;sa();return rc}var b={a:qc};if(h.instantiateWasm)return new Promise(c=>{h.instantiateWasm(b,(d,e)=>{c(a(d,e))})});va??=h.locateFile?h.locateFile("physics_engine.wasm",fa):fa+"physics_engine.wasm";return a((await ya(b)).instance)}());
(function(){function a(){h.calledRun=!0;if(!q){ra=!0;rc.ra();ma?.(h);h.onRuntimeInitialized?.();if(!h.noInitialRun){var b=pc;try{var c=b(0,0);la=c;yb(c)}catch(d){xb(d)}}if(h.postRun)for("function"==typeof h.postRun&&(h.postRun=[h.postRun]);h.postRun.length;)b=h.postRun.shift(),Ba.push(b);Aa(Ba)}}if(h.preRun)for("function"==typeof h.preRun&&(h.preRun=[h.preRun]);h.preRun.length;)Da();Aa(Ca);h.setStatus?(h.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>h.setStatus(""),1);a()},1)):a()})();
ra?moduleRtn=h:moduleRtn=new Promise((a,b)=>{ma=a;na=b});
;return moduleRtn}})();if(typeof exports==="object"&&typeof module==="object"){module.exports=PhysicsEngine;module.exports.default=PhysicsEngine}else if(typeof define==="function"&&define["amd"])define([],()=>PhysicsEngine);
